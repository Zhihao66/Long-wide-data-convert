# 🧪 本地测试指南 / Local Testing Guide

## ✅ 本地服务器已启动！

**访问地址**：http://localhost:8000

---

## 🎯 测试清单

### 1️⃣ 基础功能测试

#### 宽转长测试

**测试数据**：
```
id,name,Math,English,Science
1,Alice,85,92,88
2,Bob,90,88,92
```

**操作步骤**：
1. 选择"宽 → 长"模式
2. 将上面的数据粘贴到输入框
3. ID 列填：`id,name`
4. 变量列名填：`subject`
5. 值列名填：`score`
6. 点击"开始转换"

**预期结果**：
- 生成 9 行数据（3 个学生 × 3 个科目）
- 包含 id, name, subject, score 四列

#### 长转宽测试

**测试数据**：
```
id,name,subject,score
1,Alice,Math,85
1,Alice,English,92
1,Alice,Science,88
2,Bob,Math,90
2,Bob,English,88
2,Bob,Science,92
```

**操作步骤**：
1. 选择"长 → 宽"模式
2. 将上面的数据粘贴到输入框
3. 索引列填：`id,name`
4. 列列填：`subject`
5. 值列填：`score`
6. 点击"开始转换"

**预期结果**：
- 生成 2 行数据（2 个学生）
- 包含 id, name, Math, English, Science 五列

---

### 2️⃣ UI 交互测试

#### 输入模式切换
- [ ] 点击"文本"标签 - 显示文本框
- [ ] 点击"文件"标签 - 显示文件上传
- [ ] 切换回"文本"标签 - 恢复文本框

#### 转换模式切换
- [ ] 选择"宽 → 长" - 显示相应参数
- [ ] 选择"长 → 宽" - 显示相应参数
- [ ] 再切换回来 - 参数正确显示

#### 按钮功能
- [ ] "开始转换" - 执行转换
- [ ] "清空" - 清除输入
- [ ] "复制" - 复制输出
- [ ] "下载" - 下载 CSV
- [ ] "清空" - 清除输出

#### 消息提示
- [ ] 转换成功 - 显示绿色提示
- [ ] 错误输入 - 显示红色错误
- [ ] 提示消息 - 3 秒后自动隐藏

---

### 3️⃣ 响应式设计测试

在浏览器中按 **F12** 打开开发者工具，测试不同分辨率：

#### 桌面 (1920x1080)
- [ ] 两列布局清晰
- [ ] 所有按钮可见
- [ ] 文字清晰易读

#### 平板 (768px)
- [ ] 界面适配
- [ ] 按钮大小合适
- [ ] 无水平滚动

#### 手机 (375px)
- [ ] 变为单列布局
- [ ] 按钮可点击
- [ ] 字体大小合适

**开发者工具操作**：
1. 按 F12 打开
2. 点击"Toggle device toolbar" (手机图标)
3. 选择不同设备或输入自定义宽度
4. 测试界面显示

---

### 4️⃣ 文件上传测试

#### 创建测试文件

**1. CSV 文件** (`test_wide.csv`)：
```
id,name,2020,2021,2022
1,Alice,100,120,150
2,Bob,200,210,240
```

**2. JSON 文件** (`test_data.json`)：
```json
[
  {"id": 1, "name": "Alice", "Math": 85, "English": 92},
  {"id": 2, "name": "Bob", "Math": 90, "English": 88}
]
```

#### 测试步骤

1. **CSV 上传测试**
   - 切换到"文件"标签
   - 点击或拖拽上传 `test_wide.csv`
   - 验证数据加载到输入框
   - 进行转换

2. **JSON 上传测试**
   - 上传 `test_data.json`
   - 验证数据加载
   - 进行转换

---

### 5️⃣ 浏览器控制台测试

按 **F12** 打开开发者工具，切换到 **Console** 标签：

#### 检查是否有错误
- [ ] 控制台无红色错误信息
- [ ] 无 JavaScript 异常

#### 查看日志
```javascript
// 在控制台手动测试
convertData()  // 执行转换
copyOutput()   // 复制输出
```

---

### 6️⃣ 性能测试

#### 页面加载
- [ ] 打开网页 < 1 秒
- [ ] 动画流畅
- [ ] 无卡顿

#### 转换速度
- [ ] 小数据 (< 100 行) < 100ms
- [ ] 中数据 (100-1000 行) < 500ms
- [ ] 大数据 (1000+ 行) < 2000ms

---

### 7️⃣ 浏览器兼容性

#### 测试不同浏览器

| 浏览器 | 版本 | 测试状态 |
|--------|------|----------|
| Chrome | 最新 | ✓ 应该支持 |
| Firefox | 最新 | ✓ 应该支持 |
| Safari | 最新 | ✓ 应该支持 |
| Edge | 最新 | ✓ 应该支持 |

**测试项**：
- [ ] 页面加载正常
- [ ] 样式显示正确
- [ ] 功能工作正常
- [ ] 无浏览器警告

---

## 📋 详细测试场景

### 场景 1：学生成绩转换

**输入（宽格式）**：
```
StudentID,Name,Math,Science,English
101,张三,85,92,88
102,李四,90,88,95
103,王五,78,85,92
```

**转换参数**：
- ID 列：`StudentID,Name`
- 变量名：`Subject`
- 值名：`Score`

**预期输出（长格式）**：
```
StudentID,Name,Subject,Score
101,张三,Math,85
101,张三,Science,92
101,张三,English,88
102,李四,Math,90
...（共 9 行）
```

### 场景 2：销售数据转换

**输入（宽格式）**：
```
Region,2020Q1,2020Q2,2021Q1,2021Q2
East,100000,120000,150000,180000
West,80000,95000,120000,140000
```

**转换参数**：
- ID 列：`Region`
- 变量名：`Quarter`
- 值名：`Sales`

**预期输出（长格式）**：
```
Region,Quarter,Sales
East,2020Q1,100000
East,2020Q2,120000
...（共 8 行）
```

### 场景 3：长转宽逆向转换

使用场景 2 的长格式数据转回宽格式。

**转换参数**：
- 索引列：`Region`
- 列列：`Quarter`
- 值列：`Sales`

**预期结果**：与原始宽格式相同

---

## 🐛 问题排查

### 问题 1：数据无法转换

**症状**：点击"开始转换"没有反应

**排查步骤**：
1. F12 打开控制台，查看是否有错误
2. 确认数据格式正确
3. 确认 ID 列名拼写无误
4. 尝试简单数据测试

### 问题 2：样式显示不正确

**症状**：按钮错位、颜色不对、文字重叠

**排查步骤**：
1. 刷新页面 (Ctrl + F5)
2. 清除浏览器缓存
3. 使用其他浏览器测试
4. 检查 web/index.html 是否完整

### 问题 3：文件上传失败

**症状**：选择文件后没有加载

**排查步骤**：
1. 确认文件大小 < 10MB
2. 尝试不同格式的文件
3. 查看浏览器控制台错误
4. 尝试复制粘贴代替上传

### 问题 4：手机显示异常

**症状**：手机上查看页面布局错乱

**排查步骤**：
1. 在 Chrome 开发者工具用手机模式测试
2. 尝试不同手机型号
3. 检查 CSS 媒体查询
4. 查看是否有滚动条

---

## ✅ 完整测试清单

基础功能：
- [ ] 宽→长转换正常
- [ ] 长→宽转换正常
- [ ] CSV 数据可解析
- [ ] JSON 数据可解析

UI 交互：
- [ ] 所有按钮可点击
- [ ] 输入模式切换正常
- [ ] 转换模式切换正常
- [ ] 消息提示显示

响应式设计：
- [ ] 桌面显示完美
- [ ] 平板显示正常
- [ ] 手机显示适配
- [ ] 无滚动条溢出

性能测试：
- [ ] 页面加载快速
- [ ] 转换速度合理
- [ ] 无明显卡顿
- [ ] 动画流畅

浏览器兼容：
- [ ] Chrome 兼容
- [ ] Firefox 兼容
- [ ] Safari 兼容
- [ ] Edge 兼容

---

## 📊 测试报告模板

```
测试日期：2025-11-15
测试人员：[你的名字]
浏览器：[Chrome/Firefox/...]
系统：[Windows/Mac/Linux]

测试结果：✅ 通过 / ❌ 失败

发现的问题：
1. [问题描述]
   - 复现步骤
   - 预期结果
   - 实际结果
   - 严重程度（高/中/低）

2. ...

通过的功能：
- ✅ 功能 1
- ✅ 功能 2
- ...

建议：
- [改进建议]
```

---

## 🎉 测试完成

如果所有测试都通过了：

1. ✅ 功能完整
2. ✅ 界面美观
3. ✅ 性能良好
4. ✅ 兼容性好

**准备部署到 GitHub Pages！**

查看 `WEB_DEPLOYMENT.md` 了解如何部署。

---

## 💡 下一步

### 本地测试通过后

1. **修改配置**
   - 更新作者信息
   - 自定义颜色/样式

2. **推送到 GitHub**
   ```powershell
   git add .
   git commit -m "Add web version - tested locally"
   git push
   ```

3. **启用 GitHub Pages**
   - Settings → Pages
   - 选择 main 分支
   - 等待部署完成

4. **在线验证**
   - 访问你的网站
   - 再次测试功能

---

**本地测试完成！准备部署到全世界！** 🚀
